---
import { getCollection } from "astro:content";

const { id } = Astro.params;
const artists = await getCollection("artists");

// Find the correct artist entry
const artist = artists.find(a => a.id === id);

if (!artist) {
  throw new Error(`Artist not found: ${id}`);
}

export async function getStaticPaths() {
  const artists = await getCollection("artists");
  return artists.map(artist => ({ params: { id: artist.id } }));
}
---

<head>
  <title>{artist.data.name} - Ten Tremors</title>
</head>

<body class="bg-black text-white flex flex-col items-center">
  <header class="w-full bg-gray-900 text-center py-12">
    <h1 class="text-5xl font-bold">{artist.data.name}</h1>
  </header>

  {artist.data.image && (
    <img src={artist.data.image} alt={artist.data.name} class="w-64 h-64 rounded-full my-6"/>
  )}

  <section class="max-w-3xl text-center">
    <p class="text-lg">{artist.data.bio}</p>
  </section>

  {artist.data.website && (
    <a href={artist.data.website} target="_blank" class="mt-4 text-blue-400 hover:underline">
      Visit Website
    </a>
  )}
</body>
